"use strict";(()=>{function e(){return document.querySelectorAll(".frc-captcha")}function t(e,t,n){""===e.style[t]&&(e.style[t]=n)}function n(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}function s(e){let t,n;const s=new Promise(((e,s)=>{t=e,n=s}));return e&&e(t,n),{promise:s,resolve:t,reject:n}}function i(e,t){return 0===e.lastIndexOf(t,0)}function r(e){let t=[];const n=Object.keys(e),s=encodeURIComponent;for(let i=0;i<n.length;i++)t.push(`${s(n[i])}=${s(e[n[i]])}`);return t.join("&")}function o(e){const t=document.location;if(i(e,"/")||i(e,"."))return t.origin?t.origin:t.protocol+"//"+t.host;const n=e.match(F);if(!n)throw new Error("Invalid URL: "+e);return n[1]}function a(e,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"){let n="";for(let s=0;s<e;s++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function c(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function d(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const s=c(n);return(e,n)=>s.then((s=>n(s.transaction(t,e).objectStore(t))))}function h(){return x||(x=d("keyval-store","keyval")),x}function l(e){if(!P){let n=0;try{n=parseInt(sessionStorage.getItem(T)||"",10)}catch(t){}isNaN(n)&&(n=0),e&&n++,W=n.toString();try{sessionStorage.setItem(T,W)}catch(t){}}return W}function m(){let e;try{e=sessionStorage.getItem(O)}catch(t){return N}return e||(e=a(12),sessionStorage.setItem(O,e)),e}function u(e){e.textDecoration=e.fontStyle="none",e.fontWeight="500",e.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif',e.lineHeight="1",e.letterSpacing="-0.0125rem"}function g(){const e=window.performance;return e?e.now():0}function p(e,...t){for(let s=0;s<t.length;s++){const i=t[s];for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])}return e}function f(){const e=[0,0,0,0,0,0,0];return{s:e,add(t){const n=++e[0],s=t-e[1],i=s/n,r=i*i,o=s*i*(n-1);e[1]+=i,e[4]+=o*r*(n*n-3*n+3)+6*r*e[2]-4*i*e[3],e[3]+=o*i*(n-2)-3*i*e[2],e[2]+=o,1==n?e[5]=e[6]=t:(t<e[5]&&(e[5]=t),t>e[6]&&(e[6]=t))}}}function y(){return/Android/i.test(navigator.userAgent)}function v(e,t,s=!1,i){const r=f();let o,a=!1;return n((()=>{(i=i||document.body)[$](e,(e=>{a&&!s||(o=e.timeStamp,a=!0)})),i[$](t,(e=>{a&&(r.add(e.timeStamp-o),a=!1)}))})),r.s}function w(e){const t=[];for(let n=0;n<e.length;n++)t.push(0),document[$](e[n],(()=>t[n]++));return t}function _(){const e=[0,0,0,0,0,0,0,0],t={8:1,46:1,9:2,45:3,17:4,13:5,37:6,38:6,39:6,40:6,33:7,34:7};return document[$]("keydown",(n=>{const s=n.keyCode;t[s]?e[t[s]]++:s>=112&&s<=123&&e[0]++})),e}function E(e,t,n,s){return H.sqrt(H.pow(e-t,2)+H.pow(n-s,2))}function b(e,t,n){return H.sqrt(H.pow(e,2)+H.pow(t,2)+H.pow(n,2))}function S(e,t){let n=t-e;return n+=n>180?-360:n<-180?360:0,n}function R(e){let t=e;return t?U[t]&&(t=U[t]):t=U.global,o(t)}function k(){const e=document.querySelector('meta[name="frc-disable-eval-patching"]');return!!e&&!!e.content}function M(){const e=document.querySelector('meta[name="frc-api-endpoint"]');if(e)return e.content;const t=document.currentScript;if(t){const e=t.dataset.frcApiEndpoint;if(e)return e}const n=document.querySelector(".frc-captcha[data-api-endpoint]");if(n){const e=n.dataset.apiEndpoint;if(e)return e}}var x,C,A,F=/^((?:\w+:)?\/\/([^\/]+))/,D=class{constructor(e){this.ready=!1,this.buffer=[],this.id=e.id,this.type=e.type,this.element=e.element,this.onReady=e.onReady,this.origin=o(e.element.src)}send(e){this.ready?this.element.contentWindow.postMessage(e,this.origin):this.buffer.push(e)}setReady(e){this.onReady(),this.ready=e,this.ready&&this.flush()}flush(){for(let e=0;e<this.buffer.length;e++)this.element.contentWindow.postMessage(this.buffer[e],this.origin);this.buffer=[]}},I=class{constructor(){this.origins=new Set,this.targets={},this.answered=new Set,this.onReceiveRootMessage=()=>{},window.addEventListener("message",(e=>{this.onReceive(e)}))}listen(e){let t=this.onReceiveRootMessage;this.onReceiveRootMessage=n=>{t(n),e(n)}}addOrigin(e){this.origins.add(e)}send(e){if(e.from_id){const t=this.targets[e.from_id];if(!t)return void console.error(`[bus] Unexpected message from unknown sender ${e.from_id}`,e);"widget_announce"!==e.type&&"agent_announce"!==e.type||t.setReady(!0)}const t=e.rid;if(t){if(this.answered.has(t+e.to_id))return;this.answered.add(t+e.to_id)}if(""===e.to_id)return void this.onReceiveRootMessage(e);const n=this.targets[e.to_id];n?n.send(e):console.error(`[bus] Unexpected message to unknown target ${e.to_id}`,e)}onReceive(e){if(t=e.origin,n=this.origins,"*"!==t&&!n.has(t))return;var t,n;const s=e.data;s&&s._frc&&this.send(s)}registerTarget(e){this.targets[e.id]=e}registerTargetIFrame(e,t,n,i){const r=s();let o=new Promise((e=>setTimeout((()=>e("timeout")),i)));const a=new D({id:t,element:n,type:e,onReady:()=>r.resolve("registered")});return this.registerTarget(a),Promise.race([r.promise,o])}removeTarget(e){delete this.targets[e]}},T="frc_sc",O="frc_sid",P=!1,W="0",N="__"+a(10),X=class{constructor(e){this.mem=new Map,this.storePrefix=e}setup(){return new Promise(((e,t)=>{if(void 0!==this._hasSA)return e(this._hasSA);try{indexedDB.open("")}catch(n){return e(this._hasSA=!1)}if(!document.hasStorageAccess)return e(this._hasSA=!0);document.hasStorageAccess().then((t=>(this._hasSA=t,this._hasSA?this.idb=d("friendlycaptcha","frc"):console.debug("FRC has no storage access"),e(this._hasSA)))).catch(t)}))}get(e,t){return this.setup().then((n=>{const s=this.storePrefix+"__"+e;if(t.p)return n?function(e,t=h()){return t("readonly",(t=>c(t.get(e))))}(s,this.idb):this.mem.get(e);try{const e=sessionStorage.getItem(s);return null===e?void 0:e}catch(i){}return this.mem.get(e)}))}set(e,t,n){return this.setup().then((s=>{const i=this.storePrefix+"__"+e;if(n.p){if(s)return function(e,t,n=h()){return n("readwrite",(n=>(n.put(t,e),c(n.transaction))))}(i,t,this.idb);void 0===t?this.mem.delete(e):this.mem.set(e,t)}else try{void 0===t?(this.mem.delete(e),sessionStorage.removeItem(i)):(this.mem.set(e,t),sessionStorage.setItem(i,t))}catch(r){}}))}hasSA(){return this._hasSA}},Y="undefined"!=typeof navigator&&void 0!==navigator.userAgentData,L="FrcFrameId",j="frc-i-agent",q=class{constructor(e){this.state="init",this.response=".UNINITIALIZED",this.focusEventPending=!1,this.isDestroyed=!1,this.id=e.id;const t=e.createOpts;if(this.e=t.element,this.ready=e.registered,!this.e)throw new Error("No element provided to mount widget under.");if(this.e.frcWidget=this,this.formFieldName=void 0===t.formFieldName?"frc-captcha-response":t.formFieldName,this.sitekey=t.sitekey,this._reset=e.callbacks.onReset,this._destroy=e.callbacks.onDestroy,this._trigger=e.callbacks.onTrigger,this.startMode=e.createOpts.startMode||"focus",null!==this.formFieldName){const e=document.createElement("input");e.type="hidden",e.style.display="none",e.name=this.formFieldName,this.hiddenFormEl=e,this.e.appendChild(e)}this.setState({response:".UNCONNECTED",state:"init"}),this.ready.then((()=>{this.handleStartMode()}))}handleStartMode(){if("focus"!==this.startMode||this.focusEventPending||this.isDestroyed)"auto"===this.startMode&&this.trigger("auto");else{const t=function(e){for(;"FORM"!==e.tagName;)if(!(e=e.parentElement))return null;return e}(this.e);t&&(this.focusEventPending=!0,e=e=>{this.trigger("focus",{ev:e}),this.focusEventPending=!1},t.addEventListener("focusin",e,{once:!0,passive:!0}))}var e}reset(e={trigger:"root"}){if(this.isDestroyed)throw new Error("Can not reset destroyed widget.");this.setState({response:".RESET",state:"reset",resetTrigger:e.trigger}),this._reset(e),this.handleStartMode()}destroy(){this.isDestroyed=!0,this.hiddenFormEl&&this.hiddenFormEl.remove(),this.hiddenFormEl=void 0,this.setState({response:".DESTROYED",state:"destroyed"}),this._destroy()}trigger(e,t={}){if(this.isDestroyed)throw new Error("Can not start destroyed widget.");const n=function(e,t,n,s){const i=g(),r=n.getBoundingClientRect(),o={v:1,tt:e,pnow:i,sm:t,el:{bcr:[r.left,r.top,r.width,r.height],con:document.body.contains(n)},stack:(new Error).stack||"",we:!!window.event,weit:!!window.event&&!!window.event.isTrusted};return s&&(o.ev={ts:s.timeStamp,rt:!!s.relatedTarget,eot:!!s.explicitOriginalTarget,it:s.isTrusted}),o}(e,this.startMode,this.e,t.ev);this._trigger({trigger:n})}start(){this.trigger("programmatic")}setState(e){const t=this.state!==e.state;this.response=e.response,this.state=e.state,this.hiddenFormEl&&!1!==this.e.isConnected&&(this.hiddenFormEl.value=e.response),t&&this.dispatchWidgetEvent({name:"frc:widget.statechange",error:e.error}),"expired"===this.state?this.dispatchWidgetEvent({name:"frc:widget.expire"}):"completed"===this.state?this.dispatchWidgetEvent({name:"frc:widget.complete"}):"error"===this.state?this.dispatchWidgetEvent({name:"frc:widget.error",error:e.error}):"reset"===this.state&&this.dispatchWidgetEvent({name:"frc:widget.reset",trigger:e.resetTrigger})}dispatchWidgetEvent(e){const t={response:this.response,state:this.state,id:this.id};p(t,e),function(e,t){let n;"function"==typeof window.CustomEvent?n=new CustomEvent(t.name,{bubbles:!0,detail:t}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(t.name,!0,!1,t)),e.dispatchEvent(n)}(this.e,t)}addEventListener(e,t,n){this.e.addEventListener(e,t,n)}removeEventListener(e,t,n){this.e.removeEventListener(e,t,n)}getState(){return this.state}getResponse(){return this.response}getElement(){return this.e}},$="addEventListener",H=Math,B=class{constructor(e){this.rn=0,this.i=0,this.smel={n:0,ts:0,d:0};const t="mouse",s=this.smel,i=e=>{s.n||(s.fts=e.timeStamp,s.fxy=[e.clientX,e.clientY,e.screenX,e.screenY]),s.n++,e.type===t+"leave"&&(s.d+=e.timeStamp-s.ts),s.ts=e.timeStamp,s.xy=[e.clientX,e.clientY]},r=document;n((()=>{const e=r.body;e[$](t+"enter",i),e[$](t+"leave",i)})),this.bh={onoff:{kdu:v("keydown","keyup"),cse:v("compositionstart","compositionend"),mdu:v(t+"down",t+"up"),mle:v(t+"leave",t+"enter"),med:v(t+"enter",t+"down",!0),semd:v("scrollend",t+"down",!0,r),se:v("scroll","scrollend",!1,r),pdc:v("pointerdown","pointercancel",!0),mmc:v(t+"move","click",!0),tse:v("touchstart","touchend"),fikd:v("focusin","keydown",!0)},nev:w([t+"out","pointercancel","focus","focusin","blur","visibilitychange","copy","paste","cut","contextmenu","click","auxclick","wheel","resize"]),nk:_(),mov:this.setupMovementMetrics(),dm:this.setupMotionMetrics(),do:this.setupOrientationMetrics()},this.dep=e.disableEvalPatching||!1,this.takeTraceRecords=function(e){const t=[],n=new Map,s=window,i=function(){try{const e=document.createElement("iframe");e.style.display="none",(document.body||document.head).appendChild(e);const t=e?e.contentWindow:0;return e.remove(),t||s}catch(e){return s}}(),r=Function.prototype.toString,o=function(...e){const t="function"==typeof this&&n.get(this),s=this===o?r:t||this;return r.apply(s,e)};Function.prototype.toString=o;const a="prototype",c=s.EventTarget?s.EventTarget[a].dispatchEvent:{},d=[["Document."+a+".documentElement",s.Document[a],"documentElement"],["Element."+a+".shadowRoot",s.Element[a],"shadowRoot"],["Node."+a+".nodeType",s.Node[a],"nodeType"],["Object.is",s.Object,"is"],["Array."+a+".slice",s.Array[a],"slice"],["Document."+a+".querySelectorAll",s.Document[a],"querySelectorAll"],["Document."+a+".createElement",s.Document[a],"createElement"],["EventTarget."+a+".dispatchEvent",c,"dispatchEvent"]];return e.disableEvalPatching||d.push(["eval",s,"eval"]),d.forEach((function([e,r,o]){const a=Object.getOwnPropertyDescriptor(r,o),c=a&&(a.get||a.set);if(!a)return;if(c){if(!a.get)return}else if("object"!=typeof a.value&&"function"!=typeof a.value)return;const d=function(...n){const r={d:Date.now(),pnow:g(),n:e,st:(i.Error||s.Error)("FriendlyCaptcha_DummyTrace").stack||""};return t.push(r),(c?a.get:a.value).apply(this,n)};try{const e=c?a.get?a.get():void 0:a.value();e&&(d.length=e.length,d.name=e.name)}catch(h){}try{const e=p({},a);c?e.get=d:e.value=d,Object.defineProperty(r,o,e),n.set(d,c?a.get:a.value)}catch(h){}})),function(){return t.splice(0,t.length)}}(e)}setupMovementMetrics(){let e,t=[];const s=f(),i=f(),r=f(),o={t:s.s,v:r.s,d:i.s,ns:0},a=()=>{const n=t[t.length-1];if(t.length>=200||n&&(n[0]&&this.tm.timeStamp===n[1]||!n[0]&&this.mm.timeStamp===n[1])){if(clearInterval(e),e=void 0,1===t.length)return o.ns++,void(t=[]);const a=t[0];s.add(n[1]-a[1]),i.add(E(n[2],a[2],n[3],a[3]));for(let e=1;e<t.length;e++){const n=t[e],s=t[e-1],i=1e3*E(n[2],s[2],n[3],s[3]),o=n[1]-s[1];r.add(i/o)}return void(t=[])}let a=0;if(n?a=n[0]:this.mm&&this.tm?a=this.mm.timeStamp>this.tm.timeStamp?0:1:this.mm||(a=1),a){const e=this.tm.touches[0];e&&t.push([1,this.tm.timeStamp,e.screenX,e.screenY])}else t.push([0,this.mm.timeStamp,this.mm.screenX,this.mm.screenY])};let c=-1;return n((()=>{const t=document.body;t[$]("mousemove",(t=>{this.mm=t,void 0===e&&(a(),e=setInterval(a,50))})),t[$]("touchmove",(t=>{this.tm=t;const n=t.touches[0];if(n){const e=n.radiusX+1.234*n.radiusY;e!==c&&(c=e,this.rn++)}void 0===e&&(a(),e=setInterval(a,50))}))})),o}setupMotionMetrics(){const e=f(),t=f(),n={n:0,ts:0,ac:e.s,rr:t.s,i:0,g:!1};return y()?(window[$]("devicemotion",(s=>{n.ts=s.timeStamp,n.i=s.interval,n.g=!s.acceleration;const i=s.acceleration||s.accelerationIncludingGravity;i&&e.add(b(i.x,i.y,i.z));const r=s.rotationRate;r&&t.add(b(r.alpha,r.beta,r.gamma))})),n):n}setupOrientationMetrics(){const e=f(),t=f(),n={fts:0,ts:0,gd:e.s,bd:t.s};if(!y())return n;let s;return window[$]("deviceorientation",(i=>{null!=i.gamma&&null!=i.beta&&null!=i.alpha&&(n.ts=i.timeStamp,n.a=i.alpha,n.b=i.beta,n.g=i.gamma,s?(e.add(S(i.gamma,n.g)),t.add(S(n.b,i.beta))):(n.fts=n.ts,s=!0))})),n}gmm(){const e=this.mm;return e&&{xy:[e.clientX,e.clientY,e.screenX,e.screenY,e.offsetX,e.offsetY,e.pageX,e.pageY,e.movementX,e.movementY],ts:e.timeStamp}}gtm(){const e=this.tm,t=e&&e.touches,n=t&&t[0];return e&&n&&{id:n.identifier,xy:[n.clientX,n.clientY,n.screenX,n.screenY,n.pageX,n.pageY],r:[n.radiusX,n.radiusX,n.rotationAngle,n.force],n:t.length,ts:e.timeStamp,rn:this.rn}}get(e){const t=document.body,n=window,s=n.performance;return{v:1,i:++this.i,hl:history.length,fe:!!window.frameElement,dep:this.dep,wid:e,sc:parseInt(l(!1)),sid:m(),conv:0,t:{pnow:g(),pto:s&&s.timeOrigin||0,ts:Date.now()},dims:{d:[n.innerWidth,n.innerHeight,n.outerWidth,n.outerHeight,n.screenX,n.screenY,n.pageXOffset,n.pageYOffset,t.clientWidth,t.clientHeight],dpr:n.devicePixelRatio},mel:this.smel,mm:this.gmm(),tm:this.gtm(),bh:this.bh,stack:(new Error).stack||"",trc:this.takeTraceRecords()}}},U={eu:"https://eu.frcapi.com",global:"https://global.frcapi.com"},z="FrcFrameId",G=0;window.frcaptcha=new class{constructor(e={}){if(this.agents=new Map,this.agentState=new Map,this.widgets=new Map,this._attached=s(),this.attached=this._attached.promise,this.apiEndpoint=e.apiEndpoint,(A=A||new I).listen((e=>this.onReceiveMessage(e))),this.bus=A,++G>1&&console.warn("Multiple Friendly Captcha SDKs created, this is not recommended. Please use a single SDK instance."),this.signals=function(e){return C||(C=new B(e))}({disableEvalPatching:e.disableEvalPatching||k()}),e.startAgent){const e=R(this.apiEndpoint||M());this.ensureAgentIFrame(e)}this.setupPeriodicRefresh()}onReceiveMessage(e){if("root_set_response"===e.type){const t=this.widgets.get(e.widget_id);if(!t)return void(1===G&&console.warn(`Received set response message for widget ${e.widget_id} that doesn't exist`));t.setState(e)}else if(i(e.type,"root_store"))this.handleStoreMessage(e);else if("root_signals_get"===e.type)this.handleSignalsGetMessage(e);else if("widget_reset"===e.type){const t=this.widgets.get(e.from_id);if(!t)return void(1===G&&console.warn(`Received reset message for widget ${e.from_id} that doesn't exist`));t.reset({trigger:"widget"})}}handleSignalsGetMessage(e){const t=this.signals.get(e.widget_id);this.bus.send({type:"root_signals_get_reply",from_id:"",to_id:e.from_id,_frc:1,rid:e.rid,value:t})}handleStoreMessage(e){const t=e.from_id,n=this.agentState.get(t);n?"root_store_get"===e.type?n.store.get(e.key,{p:e.p}).then((s=>{this.bus.send({type:"root_store_get_reply",from_id:"",to_id:t,_frc:1,rid:e.rid,value:s,sa:n.store.hasSA()})})):"root_store_set"===e.type&&n.store.set(e.key,e.value,{p:e.p}).then((()=>{this.bus.send({type:"root_store_set_reply",from_id:"",to_id:t,_frc:1,rid:e.rid,sa:n.store.hasSA()})})):console.error(`Store not found ${t}`)}ensureAgentIFrame(e){const t=e+"/api/v2/captcha/agent";let n=document.getElementsByClassName(j);for(let r=0;r<n.length;r++){const t=n[r];if(o(t.src)===e&&t.dataset[z])return t.dataset[z]}const s="a_"+a(12),i=function(e,t,n){const s={origin:document.location.origin,sess_id:m(),sess_c:l(!0),comm_id:t,sdk_v:"0.1.18",v:"1",agent_id:t,ts:Date.now().toString()},i=document.createElement("iframe");i.className=j,i.dataset[L]=t,i.src=n+"?"+r(s),i.frcSDK=e;const o=i.style;return o.width=o.height=o.border=o.visibility="0",o.display="none",i}(this,s,t);this.agents.set(e,i),this.agentState.set(s,{store:new X(e),origin:e}),document.body.appendChild(i);let c=1;const d=()=>{this.bus.registerTargetIFrame("agent",s,i,3e3*c).then((t=>{if("timeout"===t){if(c>15)return console.error("[Friendly Captcha] Failed to load agent iframe after 15 retries."),i.remove(),void this.agents.delete(e);console.warn("[Friendly Captcha] Retrying agent iframe load."),i.src+="&retry="+c++,d()}}))};return d(),s}setupPeriodicRefresh(){let e=1;setInterval((()=>{const t="&expire="+e++;this.agents.forEach((e=>{e.src+=t})),this.widgets.forEach((e=>{e.getElement().querySelector("iframe").src+=t}))}),1296e5)}attach(t){void 0===t&&(t=e()),Array.isArray(t)||t instanceof NodeList||(t=[t]);const n=[];for(let e=0;e<t.length;e++){const s=t[e];if(s&&!s.frcWidget){const e=s.dataset,t={element:s,sitekey:e.sitekey,formFieldName:e.formFieldName,apiEndpoint:e.apiEndpoint,language:e.lang,theme:e.theme,startMode:e.start};n.push(this.createWidget(t))}}const s=this.getAllWidgets();return this._attached.resolve(s),this.attached=Promise.resolve(s),n}createWidget(e){const n=R(e.apiEndpoint||this.apiEndpoint||M());this.bus.addOrigin(n);const i=this.ensureAgentIFrame(n),c="w_"+a(12),d=e=>{const t={from_id:c,to_id:i,_frc:1};this.bus.send(p(t,e))},h={onDestroy:()=>{d({type:"root_destroy_widget"}),this.bus.removeTarget(c),this.widgets.delete(c),e.element.innerHTML="",e.element.removeAttribute("style")},onReset:()=>{d({type:"root_reset_widget"})},onTrigger:e=>{d({type:"root_trigger_widget",trigger:e.trigger})}},g=s(),f=new q({id:c,createOpts:e,callbacks:h,registered:g.promise});this.widgets.set(c,f);const y=function(e,t,n,s){const i=document.createElement("iframe");let o=s.language;o&&"html"!==o||(o=function(e){for(;!e.lang;)if(!(e=e.parentElement))return null;return e.lang}(s.element)||"");const a={origin:document.location.origin,sess_id:m(),sess_c:l(!0),comm_id:t,sdk_v:"0.1.18",v:"1",agent_id:e,lang:o,sitekey:s.sitekey||"",ts:Date.now().toString()};s.theme&&(a.theme=s.theme),Y&&(i.allow="clipboard-write"),i.frameBorder="0",i.src=n+"?"+r(a),i.className="frc-i-widget",i.dataset[L]=t;const c=i.style;return c.border=c.visibility="0",c.position="absolute",c.height=c.width="100%",c.display="none",s.element.appendChild(i),i}(i,c,n+"/api/v2/captcha/widget",e),v=function(e){const t=document.createElement("div");t.classList.add("frc-widget-placeholder");const n=t.style,s="dark"===e.theme||"auto"===e.theme&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;return n.color=s?"#fff":"#222",n.backgroundColor=s?"#171717":"#fafafa",n.borderRadius="4px",n.border="1px solid",n.borderColor="#ddd",n.padding="8px",n.height=n.width="100%",n.fontSize="14px",u(n),e.element.appendChild(t),t}(e);!function(e){const n=t;n(e,"position","relative"),n(e,"height","70px"),n(e,"padding","0"),n(e,"width","316px"),n(e,"maxWidth","100%"),n(e,"maxHeight","100%"),n(e,"overflow","hidden"),n(e,"borderRadius","4px")}(e.element),function(e){const t=document.createElement("div");t.classList.add("frc-banner");const n=t.style;n.position="absolute",n.bottom="2px",n.right="6px",n.lineHeight="1";const s=document.createElement("a");s.href="https://friendlycaptcha.com",s.rel="noopener";const i=s.style;u(i),i.fontSize="10px",i.color="#777",i.letterSpacing="-0.0125rem",s.target="_blank",s.textContent="Friendly Captcha",s.onmouseenter=()=>i.textDecoration="underline",s.onmouseleave=()=>i.textDecoration="none",t.appendChild(s),e.element.appendChild(t)}(e);const w=v.style;v.textContent="Anti-Robot check connecting...";let _=1;const E=()=>{this.bus.registerTargetIFrame("widget",c,y,2500*_+2e3).then((t=>{if("timeout"===t){if(_>4)return console.error("[Friendly Captcha] Failed to load widget iframe after 4 retries."),f.setState({state:"error",response:".ERROR",error:{code:"network_error",detail:"Widget load timeout, stopped retrying"}}),w.borderColor="#f00",w.fontSize="12px",void(v.textContent=`Anti-Robot check failed to connect to page or ${o(y.src)}\nCheck your connection and try again.`);w.backgroundColor="#fee",w.color="#222",v.textContent=`Anti-Robot check took too long to connect.\n\nRetrying... (${_})`,console.warn(`[Friendly Captcha] Retrying widget ${c} iframe load.`),f.setState({state:"error",response:".ERROR",error:{code:"network_error",detail:"Widget load timeout, will retry."}}),y.src+="&retry="+_++,E()}else"registered"===t&&(e.element.removeChild(v),y.style.display="")}))};return E(),g.resolve(),f}getAllWidgets(){const e=[];return this.widgets.forEach((t=>{e.push(t)})),e}getWidgetById(e){return this.widgets.get(e)}clear(){this.widgets.forEach((e=>{e.destroy()})),this.agents.forEach((e=>{e.remove()})),this.agents.clear()}},n((function(){const t=e();window.frcaptcha.attach(t)}))})();
/*!
 * Copyright (c) Friendly Captcha GmbH 2023.
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */